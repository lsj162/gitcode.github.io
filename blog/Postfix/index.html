<!doctype html><html lang=zh-Hans dir=ltr class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.7.0"><title data-rh=true>Postfix | _ |</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:image content=https://dev-js.osliu.cn/img/docusaurus-social-card.jpg><meta data-rh=true name=twitter:image content=https://dev-js.osliu.cn/img/docusaurus-social-card.jpg><meta data-rh=true property=og:url content=https://dev-js.osliu.cn/blog/Postfix><meta data-rh=true property=og:locale content=zh_Hans><meta data-rh=true name=docusaurus_locale content=zh-Hans><meta data-rh=true name=docusaurus_tag content=default><meta data-rh=true name=docsearch:language content=zh-Hans><meta data-rh=true name=docsearch:docusaurus_tag content=default><meta data-rh=true name=keywords content="_ |, blog"><meta data-rh=true name=generator content="_ |"><meta data-rh=true property=og:title content="Postfix | _ |"><meta data-rh=true name=description content="Postfix 是什么？"><meta data-rh=true property=og:description content="Postfix 是什么？"><meta data-rh=true property=og:type content=article><meta data-rh=true property=article:published_time content=2025-03-11T07:54:40.534Z><link data-rh=true rel=icon href=/img/favicon.ico><link data-rh=true rel=canonical href=https://dev-js.osliu.cn/blog/Postfix><link data-rh=true rel=alternate href=https://dev-js.osliu.cn/blog/Postfix hreflang=zh-Hans><link data-rh=true rel=alternate href=https://dev-js.osliu.cn/blog/Postfix hreflang=x-default><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@id":"https://dev-js.osliu.cn/blog/Postfix","@type":"BlogPosting","author":[],"datePublished":"2025-03-11T07:54:40.534Z","description":"Postfix 是什么？","headline":"Postfix","isPartOf":{"@id":"https://dev-js.osliu.cn/blog","@type":"Blog","name":"Blog"},"keywords":[],"mainEntityOfPage":"https://dev-js.osliu.cn/blog/Postfix","name":"Postfix","url":"https://dev-js.osliu.cn/blog/Postfix"}</script><link rel=alternate type=application/rss+xml href=/blog/rss.xml title="_ | RSS Feed"><link rel=alternate type=application/atom+xml href=/blog/atom.xml title="_ | Atom Feed"><link rel=stylesheet href=/katex/katex.min.css type=text/css><link rel=stylesheet href=/assets/css/styles.032e2511.css><script src=/assets/js/runtime~main.84a953e6.js defer></script><script src=/assets/js/main.c9bfb10e.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:"light",document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><link rel=preload as=image href=/img/logo.svg><div role=region aria-label=跳到主要内容><a class=skipToContent_aX60 href=#__docusaurus_skipToContent_fallback>跳到主要内容</a></div><nav aria-label=主导航 class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><button aria-label=切换导航栏 aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/logo.svg alt=Logo class="themedComponent_FE_3 themedComponent--light_bU9H"><img src=/img/logo.svg alt=Logo class="themedComponent_FE_3 themedComponent--dark_Unsr"></div><b class="navbar__title text--truncate">_ |</b></a><a class="navbar__item navbar__link" href=/docs/操作系统/IOS/>操作系统 🚧</a><a class="navbar__item navbar__link" href=/docs/计算机编程/人工智能/OpenAi/>计算机编程 🧩</a><a class="navbar__item navbar__link" href=/docs/前端/Css/>前端 📦️</a><a class="navbar__item navbar__link" href=/docs/客户端/APP/Flutter/>客户端 🤠</a><a class="navbar__item navbar__link" href=/docs/后端/Nodejs/>服务器 🔚</a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/blog>博客 🎉</a></div><div class="navbar__items navbar__items--right"><div class="toggle_zzLY colorModeToggle_wFR2"><button class="clean-btn toggleButton_Dsq2 toggleButtonDisabled_oyCI" type=button disabled title=切换浅色/暗黑模式（当前为浅色模式） aria-label=切换浅色/暗黑模式（当前为浅色模式） aria-live=polite aria-pressed=false><svg viewBox="0 0 24 24" width=24 height=24 class=lightToggleIcon_AgIH><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 class=darkToggleIcon_s2WQ><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg></button></div><div class=navbarSearchContainer_mtbg></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_Zu4P"><div class="container margin-vert--lg"><div class=row><aside class="col col--3"><nav class="sidebar_Noiv thin-scrollbar" aria-label=最近博文导航><div class="sidebarItemTitle_SzKN margin-bottom--md">近期文章</div><div role=group><h3 class=yearGroupHeading__uYI>2025</h3><ul class="sidebarItemList_Lubj clean-list"><li class=sidebarItem_PX1A><a class=sidebarItemLink_A1V7 href=/blog/搭建本地npm包管理？>搭建本地 npm 包管理？</a><li class=sidebarItem_PX1A><a class=sidebarItemLink_A1V7 href=/blog/浏览器工作原理？>浏览器的工作原理</a><li class=sidebarItem_PX1A><a class=sidebarItemLink_A1V7 href=/blog/CDN>CDN 服务</a><li class=sidebarItem_PX1A><a class=sidebarItemLink_A1V7 href=/blog/数据行业大揭秘！>数据行业大揭秘！DA/BA/DS 都是啥？</a><li class=sidebarItem_PX1A><a class=sidebarItemLink_A1V7 href=/blog/设计师软件>设计师软件</a><li class=sidebarItem_PX1A><a class=sidebarItemLink_A1V7 href=/blog/快应用>快应用</a><li class=sidebarItem_PX1A><a class=sidebarItemLink_A1V7 href=/blog/前端seo相关常识>前端seo相关常识</a><li class=sidebarItem_PX1A><a class=sidebarItemLink_A1V7 href="/blog/2025 4 23/使用 Redis 的分布式锁">使用 Redis 的分布式锁</a><li class=sidebarItem_PX1A><a class=sidebarItemLink_A1V7 href=/blog/Electronjs博客阅读>Electronjs博客阅读</a><li class=sidebarItem_PX1A><a class=sidebarItemLink_A1V7 href=/blog/WebGL库有哪些热门的？>WebGL 库有哪些热门的？</a><li class=sidebarItem_PX1A><a class=sidebarItemLink_A1V7 href=/blog/VPN>VPN</a><li class=sidebarItem_PX1A><a class=sidebarItemLink_A1V7 href=/blog/Yapi搭建与使用>Yapi搭建与使用</a><li class=sidebarItem_PX1A><a class=sidebarItemLink_A1V7 href=/blog/前端相关术语>前端相关术语</a><li class=sidebarItem_PX1A><a aria-current=page class="sidebarItemLink_A1V7 sidebarItemLinkActive_iVI0" href=/blog/Postfix>Postfix</a><li class=sidebarItem_PX1A><a class=sidebarItemLink_A1V7 href=/blog/前端相关面试题>前端面试题</a><li class=sidebarItem_PX1A><a class=sidebarItemLink_A1V7 href=/blog/文档工具>文档工具</a><li class=sidebarItem_PX1A><a class=sidebarItemLink_A1V7 href=/blog/Web3.0>Web3</a><li class=sidebarItem_PX1A><a class=sidebarItemLink_A1V7 href=/blog/Unsplash>unsplash</a><li class=sidebarItem_PX1A><a class=sidebarItemLink_A1V7 href="/blog/Markdown 文档语法格式">Markdown 文档语法格式</a></ul></div><div role=group><h3 class=yearGroupHeading__uYI>1970</h3><ul class="sidebarItemList_Lubj clean-list"><li class=sidebarItem_PX1A><a class=sidebarItemLink_A1V7 href=/blog/网上冲浪>网上冲浪</a></ul></div></nav></aside><main class="col col--7"><article class=""><header><h1 class=title_UNnX>Postfix</h1><div class="container_UWlH margin-vert--md"><time datetime=2025-03-11T07:54:40.534Z>2025年3月11日</time> · <!-- -->阅读需 6 分钟</div></header><div id=__blog-post-container class=markdown><h2 class="anchor anchorWithStickyNavbar_KzqO" id=postfix-是什么>Postfix 是什么？<a href=#postfix-是什么 class=hash-link aria-label="Postfix 是什么？的直接链接" title="Postfix 是什么？的直接链接">​</a></h2>
<p>Postfix 是一款开源的 邮件传输代理（MTA, Mail Transfer Agent），用于在 Linux/Unix 服务器 上发送、接收和路由电子邮件。最初在 IBM 研究部门开发，作为广泛使用的 Sendmail 程序的替代品。<a href=http://www.porcupine.org/wietse/ target=_blank rel="noopener noreferrer">Wietse Venema</a></p>
<!-- -->
<h2 class="anchor anchorWithStickyNavbar_KzqO" id=简介>简介<a href=#简介 class=hash-link aria-label=简介的直接链接 title=简介的直接链接>​</a></h2>
<p>Postfix 有数百个配置参数，这些参数通过 main.cf 文件进行控制。幸运的是，所有参数都有合理的默认值。在许多情况下，您只需配置两三个参数，就可以开始使用邮件系统。</p>
<h3 class="anchor anchorWithStickyNavbar_KzqO" id=为什么选择-postfix-邮件服务器软件>为什么选择 Postfix 邮件服务器软件?<a href=#为什么选择-postfix-邮件服务器软件 class=hash-link aria-label="为什么选择 Postfix 邮件服务器软件?的直接链接" title="为什么选择 Postfix 邮件服务器软件?的直接链接">​</a></h3>
<p>Postfix（推荐，Linux 上最流行），Postfix 是开源的邮件服务器软件，并且在安全性方面非常出色。</p>
<table><thead><tr><th style=text-align:left>适用场景<th style=text-align:center>Postfix<th style=text-align:right>Sendmail<tbody><tr><td style=text-align:left>企业邮件服务器<td style=text-align:center>✅ 推荐（高性能，高安全）<td style=text-align:right>❌ 不推荐（维护成本高）<tr><td style=text-align:left>大规模邮件系统<td style=text-align:center>✅ 适用（高并发，邮件队列优化）<td style=text-align:right>❌ 不适用（单进程瓶颈）<tr><td style=text-align:left>个人邮件服务器<td style=text-align:center>✅ 推荐（易配置）<td style=text-align:right>❌ 不推荐（复杂，易出错）<tr><td style=text-align:left>旧 Unix 服务器<td style=text-align:center>✅ 可用<td style=text-align:right>✅ 适合（Unix 传统邮件服务器）</table>
<h3 class="anchor anchorWithStickyNavbar_KzqO" id=postfix-安全>Postfix 安全？<a href=#postfix-安全 class=hash-link aria-label="Postfix 安全？的直接链接" title="Postfix 安全？的直接链接">​</a></h3>
<p>✅ 最小权限设计：采用 模块化架构，大部分进程在受限权限下运行，即使有漏洞，也很难提升权限。</p>
<p>✅ 防止垃圾邮件：支持 SPF、DKIM、DMARC，结合 RBL（黑名单）机制有效拦截垃圾邮件。</p>
<p>✅ SMTP 认证：支持 TLS 加密（STARTTLS），可防止明文密码泄露。</p>
<p>✅ 防止邮件伪造：默认支持 SASL 认证，可结合 OpenDKIM 进行 DKIM 签名，提高邮件可信度。</p>
<p>✅ DDoS 保护：支持 Greylisting（灰名单），防止邮件轰炸攻击。</p>
<p>✅ 日志监控：支持 fail2ban，可自动封禁可疑 IP，防止暴力破解。</p>
<h1>用途：</h1>
<p>那么实现以域名方式发送邮件是不是很酷。✅ 最佳方案：使用 SMTP 代发（163、Gmail、SendGrid）</p>
<h2 class="anchor anchorWithStickyNavbar_KzqO" id=smtp-是什么>SMTP 是什么?<a href=#smtp-是什么 class=hash-link aria-label="SMTP 是什么?的直接链接" title="SMTP 是什么?的直接链接">​</a></h2>
<p>SMTP（Simple Mail Transfer Protocol，简单邮件传输协议）服务器是用于发送邮件的服务器，它负责接收、传输和分发电子邮件到目标邮件服务器。</p>
<h3 class="anchor anchorWithStickyNavbar_KzqO" id=smtp-服务器的作用>SMTP 服务器的作用：<a href=#smtp-服务器的作用 class=hash-link aria-label="SMTP 服务器的作用：的直接链接" title="SMTP 服务器的作用：的直接链接">​</a></h3>
<p>📩 发送邮件：无论是个人邮件、系统通知还是批量邮件，SMTP 服务器都是邮件发送的核心。
✅ 身份认证：防止垃圾邮件，SMTP 服务器通常要求发件人身份验证（用户名+密码）。
🔄 邮件中继：SMTP 服务器可以作为邮件中继，把邮件从一个服务器转发到另一个服务器。
🚀 提高邮件送达率：使用受信任的 SMTP 服务器（如 Gmail、SendGrid）可以提高邮件送达率，避免进入垃圾邮件。</p>
<h2 class="anchor anchorWithStickyNavbar_KzqO" id=配置>配置<a href=#配置 class=hash-link aria-label=配置的直接链接 title=配置的直接链接>​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_KzqO" id=dns-添加-mx-记录>DNS 添加 MX 记录<a href=#dns-添加-mx-记录 class=hash-link aria-label="DNS 添加 MX 记录的直接链接" title="DNS 添加 MX 记录的直接链接">​</a></h3>
<div class="language-md codeBlockContainer_xur8 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_c50a><pre tabindex=0 class="prism-code language-md codeBlock_sshL thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_hRzg><span class=token-line style=color:#393A34><span class="token table table-header-row punctuation" style=color:#393A34>|</span><span class="token table table-header-row table-header important"> 名称 </span><span class="token table table-header-row punctuation" style=color:#393A34>|</span><span class="token table table-header-row table-header important"> 记录类型 </span><span class="token table table-header-row punctuation" style=color:#393A34>|</span><span class="token table table-header-row table-header important">               值 </span><span class="token table table-header-row punctuation" style=color:#393A34>|</span><span class="token table table-header-row"></span><br></span><span class=token-line style=color:#393A34><span class="token table table-header-row"></span><span class="token table table-line punctuation" style=color:#393A34>|</span><span class="token table table-line"> </span><span class="token table table-line punctuation" style=color:#393A34>:---</span><span class="token table table-line"> </span><span class="token table table-line punctuation" style=color:#393A34>|</span><span class="token table table-line"> </span><span class="token table table-line punctuation" style=color:#393A34>:------:</span><span class="token table table-line"> </span><span class="token table table-line punctuation" style=color:#393A34>|</span><span class="token table table-line"> </span><span class="token table table-line punctuation" style=color:#393A34>---------------:</span><span class="token table table-line"> </span><span class="token table table-line punctuation" style=color:#393A34>|</span><span class="token table table-line"></span><br></span><span class=token-line style=color:#393A34><span class="token table table-line"></span><span class="token table table-data-rows punctuation" style=color:#393A34>|</span><span class="token table table-data-rows table-data"> @    </span><span class="token table table-data-rows punctuation" style=color:#393A34>|</span><span class="token table table-data-rows table-data">    MX    </span><span class="token table table-data-rows punctuation" style=color:#393A34>|</span><span class="token table table-data-rows table-data"> mail.example.com </span><span class="token table table-data-rows punctuation" style=color:#393A34>|</span><br></span></code></pre><div class=buttonGroup_AY2k><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_g9Vf aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_skUg><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_l_Ge><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_KzqO" id=dns-添加-spf-记录>DNS 添加 SPF 记录<a href=#dns-添加-spf-记录 class=hash-link aria-label="DNS 添加 SPF 记录的直接链接" title="DNS 添加 SPF 记录的直接链接">​</a></h3>
<p>SPF 记录用于验证邮件的来源是否可信。</p>
<div class="language-md codeBlockContainer_xur8 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_c50a><pre tabindex=0 class="prism-code language-md codeBlock_sshL thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_hRzg><span class=token-line style=color:#393A34><span class="token table table-header-row punctuation" style=color:#393A34>|</span><span class="token table table-header-row table-header important"> 名称 </span><span class="token table table-header-row punctuation" style=color:#393A34>|</span><span class="token table table-header-row table-header important"> 记录类型 </span><span class="token table table-header-row punctuation" style=color:#393A34>|</span><span class="token table table-header-row table-header important">                              值 </span><span class="token table table-header-row punctuation" style=color:#393A34>|</span><span class="token table table-header-row"></span><br></span><span class=token-line style=color:#393A34><span class="token table table-header-row"></span><span class="token table table-line punctuation" style=color:#393A34>|</span><span class="token table table-line"> </span><span class="token table table-line punctuation" style=color:#393A34>:---</span><span class="token table table-line"> </span><span class="token table table-line punctuation" style=color:#393A34>|</span><span class="token table table-line"> </span><span class="token table table-line punctuation" style=color:#393A34>:------:</span><span class="token table table-line"> </span><span class="token table table-line punctuation" style=color:#393A34>|</span><span class="token table table-line"> </span><span class="token table table-line punctuation" style=color:#393A34>------------------------------:</span><span class="token table table-line"> </span><span class="token table table-line punctuation" style=color:#393A34>|</span><span class="token table table-line"></span><br></span><span class=token-line style=color:#393A34><span class="token table table-line"></span><span class="token table table-data-rows punctuation" style=color:#393A34>|</span><span class="token table table-data-rows table-data"> @    </span><span class="token table table-data-rows punctuation" style=color:#393A34>|</span><span class="token table table-data-rows table-data">   TXT    </span><span class="token table table-data-rows punctuation" style=color:#393A34>|</span><span class="token table table-data-rows table-data"> v=spf1 ip4:192.168.111.111 -all </span><span class="token table table-data-rows punctuation" style=color:#393A34>|</span><br></span></code></pre><div class=buttonGroup_AY2k><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_g9Vf aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_skUg><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_l_Ge><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<ul>
<li>ip4:192.168.1.100：允许此 IP 地址发送邮件。</li>
<li>-all：拒绝所有不匹配的来源，防止伪造邮件。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_KzqO" id=dkim-用于邮件签名>DKIM 用于邮件签名<a href=#dkim-用于邮件签名 class=hash-link aria-label="DKIM 用于邮件签名的直接链接" title="DKIM 用于邮件签名的直接链接">​</a></h3>
<p>更多安全，DKIM 用于邮件签名，确保邮件未被篡改。</p>
<div class="language-shell codeBlockContainer_xur8 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_c50a><pre tabindex=0 class="prism-code language-shell codeBlock_sshL thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_hRzg><span class=token-line style=color:#393A34><span class="token plain"># 1. 安装 OpenDKIM</span><br></span><span class=token-line style=color:#393A34><span class="token plain">apt install opendkim opendkim-tools</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"># 2. 生成 DKIM 密钥（查看 cat default.txt）</span><br></span><span class=token-line style=color:#393A34><span class="token plain">opendkim-genkey -D /etc/opendkim/keys/ -s default -d example.com</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"># 3. 在 DNS 中添加 DKIM 记录：</span><br></span><span class=token-line style=color:#393A34><span class="token plain">default._domainkey TXT  "v=DKIM1; k=rsa; p=你的公钥"</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"># 4. 配置 Postfix 关联 DKIM： 在 main.cf 中添加：</span><br></span><span class=token-line style=color:#393A34><span class="token plain">smtpd_milters = unix:/var/run/opendkim/opendkim.sock</span><br></span><span class=token-line style=color:#393A34><span class="token plain">non_smtpd_milters = unix:/var/run/opendkim/opendkim.sock</span><br></span></code></pre><div class=buttonGroup_AY2k><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_g9Vf aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_skUg><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_l_Ge><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_KzqO" id=dns-添加-dmarc-记录>DNS 添加 DMARC 记录：<a href=#dns-添加-dmarc-记录 class=hash-link aria-label="DNS 添加 DMARC 记录：的直接链接" title="DNS 添加 DMARC 记录：的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_xur8 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_c50a><pre tabindex=0 class="prism-code language-shell codeBlock_sshL thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_hRzg><span class=token-line style=color:#393A34><span class="token plain">_dmarc TXT "v=DMARC1; p=reject; rua=mailto:admin@example.com"</span><br></span></code></pre><div class=buttonGroup_AY2k><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_g9Vf aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_skUg><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_l_Ge><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<ul>
<li>v=DMARC1：表示 DMARC 版本。</li>
<li>p=reject：拒绝所有不符合 SPF/DKIM 规则的邮件。</li>
<li>rua=mailto<!-- -->:admin<!-- -->@example.com：接收 DMARC 报告的邮箱。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_KzqO" id=验证所有邮件设置>验证所有邮件设置<a href=#验证所有邮件设置 class=hash-link aria-label=验证所有邮件设置的直接链接 title=验证所有邮件设置的直接链接>​</a></h2>
<div class="language-shell codeBlockContainer_xur8 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_c50a><pre tabindex=0 class="prism-code language-shell codeBlock_sshL thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_hRzg><span class=token-line style=color:#393A34><span class="token plain"># 1. 检查 SPF 记录</span><br></span><span class=token-line style=color:#393A34><span class="token plain">dig TXT example.com</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"># 2. 检查 DKIM 记录</span><br></span><span class=token-line style=color:#393A34><span class="token plain">dig TXT default._domainkey.example.com</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"># 3. 检查 DMARC 记录</span><br></span><span class=token-line style=color:#393A34><span class="token plain">dig TXT _dmarc.example.com</span><br></span></code></pre><div class=buttonGroup_AY2k><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_g9Vf aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_skUg><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_l_Ge><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_KzqO" id=检查>检查<a href=#检查 class=hash-link aria-label=检查的直接链接 title=检查的直接链接>​</a></h2>
<p>反向 DNS 解析，确保你的邮件服务器域名与 rDNS 匹配，否则邮件容易被判为垃圾邮件！</p>
<div class="language-shell codeBlockContainer_xur8 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_c50a><pre tabindex=0 class="prism-code language-shell codeBlock_sshL thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_hRzg><span class=token-line style=color:#393A34><span class="token plain">dig -x 192.168.1.100</span><br></span><span class=token-line style=color:#393A34><span class="token plain"># 100.1.168.192.in-addr.arpa. PTR mail.example.com.</span><br></span></code></pre><div class=buttonGroup_AY2k><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_g9Vf aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_skUg><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_l_Ge><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_KzqO" id=重启>重启<a href=#重启 class=hash-link aria-label=重启的直接链接 title=重启的直接链接>​</a></h2>
<div class="language-shell codeBlockContainer_xur8 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_c50a><pre tabindex=0 class="prism-code language-shell codeBlock_sshL thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_hRzg><span class=token-line style=color:#393A34><span class="token plain">systemctl restart opendkim postfix</span><br></span></code></pre><div class=buttonGroup_AY2k><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_g9Vf aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_skUg><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_l_Ge><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_chtK alert alert--success"><div class=admonitionHeading_vLI4><span class=admonitionIcon_SI7Q><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>提示</div><div class=admonitionContent_MKsO><p>在遥远的过去，互联网是一个友好的环境。看上去，城楼之下，人人皆可传递纸飞机。向着城楼飞去，要想飞过城楼是不能的（25 端口高危）。
高高的城墙紧关的大门，就算是翻上了城楼也会被士兵拦下，也得热情招呼递上专属令牌，才可以进入城内，城内那可是眼花缭乱，因为它们还可以链接着更多的世界之城。
要是混熟了，搞得一枚令牌天天跑着，那也得交个混熟的费用。（每个士兵接待流量 100 条左右，超过计服务费）。<p><a href=https://postmarkapp.com/pricing target=_blank rel="noopener noreferrer">对比邮箱价格</a></div></div>
<h1>参考链接</h1>
<p><a href=https://www.postfix.org/documentation.html target=_blank rel="noopener noreferrer">https://www.postfix.org/documentation.html</a></div><footer class=docusaurus-mt-lg><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class=col><a href=https://github.com/blog/Postfix/index.mdx target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_jaN0 aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>编辑此页</a></div><div class="col lastUpdated_sDEL"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label=博文分页导航><a class="pagination-nav__link pagination-nav__link--prev" href=/blog/前端相关术语><div class=pagination-nav__sublabel>较新一篇</div><div class=pagination-nav__label>前端相关术语</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/blog/前端相关面试题><div class=pagination-nav__sublabel>较旧一篇</div><div class=pagination-nav__label>前端面试题</div></a></nav></main><div class="col col--2"><div class="tableOfContents_DSq4 thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#postfix-是什么 class="table-of-contents__link toc-highlight">Postfix 是什么？</a><li><a href=#简介 class="table-of-contents__link toc-highlight">简介</a><ul><li><a href=#为什么选择-postfix-邮件服务器软件 class="table-of-contents__link toc-highlight">为什么选择 Postfix 邮件服务器软件?</a><li><a href=#postfix-安全 class="table-of-contents__link toc-highlight">Postfix 安全？</a></ul><li><a href=#smtp-是什么 class="table-of-contents__link toc-highlight">SMTP 是什么?</a><ul><li><a href=#smtp-服务器的作用 class="table-of-contents__link toc-highlight">SMTP 服务器的作用：</a></ul><li><a href=#配置 class="table-of-contents__link toc-highlight">配置</a><ul><li><a href=#dns-添加-mx-记录 class="table-of-contents__link toc-highlight">DNS 添加 MX 记录</a><li><a href=#dns-添加-spf-记录 class="table-of-contents__link toc-highlight">DNS 添加 SPF 记录</a><li><a href=#dkim-用于邮件签名 class="table-of-contents__link toc-highlight">DKIM 用于邮件签名</a><li><a href=#dns-添加-dmarc-记录 class="table-of-contents__link toc-highlight">DNS 添加 DMARC 记录：</a></ul><li><a href=#验证所有邮件设置 class="table-of-contents__link toc-highlight">验证所有邮件设置</a><li><a href=#检查 class="table-of-contents__link toc-highlight">检查</a><li><a href=#重启 class="table-of-contents__link toc-highlight">重启</a></ul></div></div></div></div></div></div>