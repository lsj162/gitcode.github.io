<!doctype html>
<html lang="zh-Hans" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">HLS 流媒体传输协议 | _ |</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://osliu.com/blog/HLS 流媒体传输协议"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" name="keywords" content="_ |, blog"><meta data-rh="true" name="generator" content="_ |"><meta data-rh="true" property="og:title" content="HLS 流媒体传输协议 | _ |"><meta data-rh="true" name="description" content="HLS 全称是 HTTP Live Streaming，是一个由 Apple 公司提出的基于 HTTP 的媒体流传输协议，用于实时音视频流的传输。目前 HLS 协议被广泛的应用于视频点播和直播领域。"><meta data-rh="true" property="og:description" content="HLS 全称是 HTTP Live Streaming，是一个由 Apple 公司提出的基于 HTTP 的媒体流传输协议，用于实时音视频流的传输。目前 HLS 协议被广泛的应用于视频点播和直播领域。"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2025-02-03T15:41:23.000Z"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://osliu.com/blog/HLS 流媒体传输协议"><link data-rh="true" rel="alternate" href="https://osliu.com/blog/HLS 流媒体传输协议" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://osliu.com/blog/HLS 流媒体传输协议" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://osliu.com/blog/HLS 流媒体传输协议","mainEntityOfPage":"https://osliu.com/blog/HLS 流媒体传输协议","url":"https://osliu.com/blog/HLS 流媒体传输协议","headline":"HLS 流媒体传输协议","name":"HLS 流媒体传输协议","description":"HLS 全称是 HTTP Live Streaming，是一个由 Apple 公司提出的基于 HTTP 的媒体流传输协议，用于实时音视频流的传输。目前 HLS 协议被广泛的应用于视频点播和直播领域。","datePublished":"2025-02-03T15:41:23.000Z","author":[],"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://osliu.com/blog","name":"Blog"}}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="_ | RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="_ | Atom Feed">




<link rel="stylesheet" href="/katex/katex.min.css"><link rel="stylesheet" href="/assets/css/styles.6da1264b.css">
<script src="/assets/js/runtime~main.030756ef.js" defer="defer"></script>
<script src="/assets/js/main.ae267638.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/svg/logo.svg"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_Hjcp" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/svg/logo.svg" alt="Logo" class="themedComponent_Xdrl themedComponent--light_l9ex"><img src="/svg/logo.svg" alt="Logo" class="themedComponent_Xdrl themedComponent--dark_kf9A"></div><b class="navbar__title text--truncate">_ |</b></a><a class="navbar__item navbar__link" href="/docs/计算机科学/Curl/入门">计算机科学</a><a class="navbar__item navbar__link" href="/docs/操作系统/Linux/Linux文件操作命令">操作系统 😯</a><a class="navbar__item navbar__link" href="/docs/前端/Css/">前端 🎉</a><a class="navbar__item navbar__link" href="/docs/后端/C/">后端 🍔</a><a class="navbar__item navbar__link" href="/docs/客户端/Electron/">客户端 🔚</a><a class="navbar__item navbar__link" href="/docs/人工智能/TensorFlow/">人工智能</a><a class="navbar__item navbar__link" href="/docs/Web3.0/Web3.0/">Web3.0</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">博客</a></div><div class="navbar__items navbar__items--right"><div class="toggle_oyBM colorModeToggle_tQ7J"><button class="clean-btn toggleButton_tc6S toggleButtonDisabled_xzO0" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_g7Lz"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_Xv2t"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_QJZf"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_nC6t"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_slFN thin-scrollbar" aria-label="最近博文导航"><div class="sidebarItemTitle_JkYq margin-bottom--md">近期文章</div><div role="group"><h3 class="yearGroupHeading_lADI">2025</h3><ul class="sidebarItemList_B_BJ clean-list"><li class="sidebarItem_iSJH"><a class="sidebarItemLink_QAT_" href="/blog/显卡">视频</a></li><li class="sidebarItem_iSJH"><a aria-current="page" class="sidebarItemLink_QAT_ sidebarItemLinkActive_uGdt" href="/blog/HLS 流媒体传输协议">HLS 流媒体传输协议</a></li><li class="sidebarItem_iSJH"><a class="sidebarItemLink_QAT_" href="/blog/硬件">硬件</a></li><li class="sidebarItem_iSJH"><a class="sidebarItemLink_QAT_" href="/blog/系统">系统</a></li><li class="sidebarItem_iSJH"><a class="sidebarItemLink_QAT_" href="/blog/计算机知识">什么是计算机网络?</a></li><li class="sidebarItem_iSJH"><a class="sidebarItemLink_QAT_" href="/blog/云服务器/阿里云">阿里云</a></li><li class="sidebarItem_iSJH"><a class="sidebarItemLink_QAT_" href="/blog/文档工具/vitepress/入门">介绍</a></li><li class="sidebarItem_iSJH"><a class="sidebarItemLink_QAT_" href="/blog/文档工具/vitepress/评论插件">评论</a></li><li class="sidebarItem_iSJH"><a class="sidebarItemLink_QAT_" href="/blog/文档工具/vitepress/配置">目录结构</a></li><li class="sidebarItem_iSJH"><a class="sidebarItemLink_QAT_" href="/blog/硬件/计算机硬件组成原理">硬件/计算机硬件组成原理</a></li><li class="sidebarItem_iSJH"><a class="sidebarItemLink_QAT_" href="/blog/硬件/计算机硬件">硬件/计算机硬件</a></li><li class="sidebarItem_iSJH"><a class="sidebarItemLink_QAT_" href="/blog/文档工具/vscode">文档工具/vscode</a></li><li class="sidebarItem_iSJH"><a class="sidebarItemLink_QAT_" href="/blog/设计师/Blender/文档">设计师/Blender/文档</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_lADI">2021</h3><ul class="sidebarItemList_B_BJ clean-list"><li class="sidebarItem_iSJH"><a class="sidebarItemLink_QAT_" href="/blog/2025/02/07/Markdown语法格式">Markdown 语法格式</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_lADI">2016</h3><ul class="sidebarItemList_B_BJ clean-list"><li class="sidebarItem_iSJH"><a class="sidebarItemLink_QAT_" href="/blog/2016/02/04/网上冲浪">一度流量主播</a></li></ul></div></nav></aside><main class="col col--7"><article class=""><header><h1 class="title_eZ3G">HLS 流媒体传输协议</h1><div class="container_y_bt margin-vert--md"><time datetime="2025-02-03T15:41:23.000Z">2025年2月3日</time> · <!-- -->阅读需 6 分钟</div></header><div id="__blog-post-container" class="markdown"><p>HLS 全称是 HTTP Live Streaming，是一个由 Apple 公司提出的基于 HTTP 的媒体流传输协议，用于实时音视频流的传输。目前 HLS 协议被广泛的应用于视频点播和直播领域。</p>
<!-- -->
<h2 class="anchor anchorWithStickyNavbar_GyWS" id="实现原理">实现原理<a href="#实现原理" class="hash-link" aria-label="实现原理的直接链接" title="实现原理的直接链接">​</a></h2>
<p>HLS 跟 DASH 协议的原理非常类似。通过将整条流切割成一个小的可以通过 HTTP 下载的媒体文件，然后提供一个配套的媒体列表文件，提供给客户端，让客户端顺序地拉取这些媒体文件播放，来实现看上去是在播放一条流的效果。由于传输层协议只需要标准的 HTTP 协议，HLS 可以方便的透过防火墙或者代理服务器，而且可以很方便的利用 CDN 进行分发加速，并且客户端实现起来也很方便。</p>
<p>HLS 把整个流分成一个个小的基于 HTTP 的文件来下载，每次只下载一些。</p>
<p>HLS 协议由三部分组成：</p>
<p>HTTP：传输协议
M3U8：索引文件
TS：音视频的媒体信息
关于 HLS 的详细介绍可参考：draft-pantos-http-live-streaming</p>
<p>在 HTML5 页面上使用 HLS 非常简单：</p>
<div class="language-js codeBlockContainer_RIKU theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_g5z_"><pre tabindex="0" class="prism-code language-js codeBlock_CKHd thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Il7l"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">video src</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;example.m3u8&quot;</span><span class="token plain"> controls</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">video</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_g6oc"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_vo8u" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_M40f"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_AqMK"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>或者：</p>
<div class="language-js codeBlockContainer_RIKU theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_g5z_"><pre tabindex="0" class="prism-code language-js codeBlock_CKHd thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Il7l"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">video controls</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">source src</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;example.m3u8&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">source</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">video</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_g6oc"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_vo8u" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_M40f"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_AqMK"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>M3U8 索引文件
HLS 的 m3u8 文件，是一个 TS 的列表，也就是告诉浏览器可以播放这些 TS 文件：</p>
<div class="language-md codeBlockContainer_RIKU theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_g5z_"><pre tabindex="0" class="prism-code language-md codeBlock_CKHd thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Il7l"><span class="token-line" style="color:#393A34"><span class="token title important punctuation" style="color:#393A34">#</span><span class="token title important">EXTM3U</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token title important punctuation" style="color:#393A34">#</span><span class="token title important">EXT-X-VERSION:3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token title important punctuation" style="color:#393A34">#</span><span class="token title important">EXT-X-MEDIA-SEQUENCE:64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token title important punctuation" style="color:#393A34">#</span><span class="token title important">EXT-X-TARGETDURATION:12</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token title important punctuation" style="color:#393A34">#</span><span class="token title important">EXTINF:11.550</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">livestream-64.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token title important punctuation" style="color:#393A34">#</span><span class="token title important">EXTINF:5.250</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">livestream-65.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token title important punctuation" style="color:#393A34">#</span><span class="token title important">EXTINF:7.700</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">livestream-66.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token title important punctuation" style="color:#393A34">#</span><span class="token title important">EXTINF:6.850</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">livestream-67.ts</span><br></span></code></pre><div class="buttonGroup_g6oc"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_vo8u" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_M40f"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_AqMK"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>有几个关键的参数，这些参数在 SRS 的配置文件中都有配置项：</p>
<ul>
<li>EXT-X-TARGETDURATION：所有切片的最大时长。有些 Apple 设备这个参数不正确会无法播放。SRS 会自动计算出 ts 文件的最大时长，然后更新 m3u8 时会自动更新这个值。用户不必自己配置。</li>
<li>EXTINF：ts 切片的实际时长，SRS 提供配置项 hls_fragment，但实际上的 ts 时长还受 gop 影响。 ts 文件的数目：SRS 可配置 hls_window，指定 m3u8 中保存多少个切片，SRS 会自动清理旧的切片。</li>
<li>livestream-67.ts：SRS 会自动维护 ts 切片的文件名，在编码器重推之后，这个编号会继续增长，保证流的连续性。直到 SRS 重启，这个编号才重置为 0。
譬如，每个 ts 切片为 10 秒，窗口为 60 秒，那么 m3u8 中会保存 6 个 ts 切片。</li>
</ul>
<p>每一个 .m3u8 文件，分别对应若干个 ts 文件，这些 ts 文件才是真正存放视频的数据，m3u8 文件只是存放了一些 ts 文件的配置信息和相关路径，当视频播放时，.m3u8 是动态改变的，video 标签会解析这个文件，并找到对应的 ts 文件来播放，所以一般为了加快速度，.m3u8 放在 Web 服务器上，ts 文件放在 CDN 上。</p>
<p>.m3u8 文件，其实就是以 UTF-8 编码的 m3u 文件，这个文件本身不能播放，只是存放了播放信息的文本文件。</p>
<h2 class="anchor anchorWithStickyNavbar_GyWS" id="技术架构">技术架构<a href="#技术架构" class="hash-link" aria-label="技术架构的直接链接" title="技术架构的直接链接">​</a></h2>
<p>HLS 的架构分为三部分：Server、CDN 和 Client，即服务器、分发组件和客户端。</p>
<p>下面是 HLS 整体架构图：</p>
<h3 class="anchor anchorWithStickyNavbar_GyWS" id="server">Server<a href="#server" class="hash-link" aria-label="Server的直接链接" title="Server的直接链接">​</a></h3>
<p>服务器端将视频数据流编码、封装和切割为连续的、时长很短的 MPEG-TS 格式的文件，通常一个 ts 分片大概是 10s；并提供一个配套的媒体列表文件（m3u8 文件）。</p>
<h3 class="anchor anchorWithStickyNavbar_GyWS" id="视频封装格式mpeg-ts">视频封装格式：MPEG-TS。<a href="#视频封装格式mpeg-ts" class="hash-link" aria-label="视频封装格式：MPEG-TS。的直接链接" title="视频封装格式：MPEG-TS。的直接链接">​</a></h3>
<p>编码：视频编码为 H.264，音频编码为 AAC, MP3, AC-3 或者 EC-3 格式。</p>
<p>HLS 也支持纯音频格式，通常是 MPEG 基本音频文件（MP4 封装的 AAC 格式）。</p>
<h3 class="anchor anchorWithStickyNavbar_GyWS" id="distribution">Distribution<a href="#distribution" class="hash-link" aria-label="Distribution的直接链接" title="Distribution的直接链接">​</a></h3>
<p>由标准的网络服务器组成，接收客户端的请求和分发所有的资源包括 m3u8 列表文件和 ts 分片文件。</p>
<h3 class="anchor anchorWithStickyNavbar_GyWS" id="client">Client<a href="#client" class="hash-link" aria-label="Client的直接链接" title="Client的直接链接">​</a></h3>
<p>客户端先通过下载 m3u8 文件，再通过 m3u8 文件的索引地址顺序地拉取 ts 媒体文件播放。对于直播，它的索引文件一直处于动态变化的，你需要不断的更新索引文件 playlist 然后移除旧的索引文件。</p>
<h2 class="anchor anchorWithStickyNavbar_GyWS" id="hls-协议规定">HLS 协议规定：<a href="#hls-协议规定" class="hash-link" aria-label="HLS 协议规定：的直接链接" title="HLS 协议规定：的直接链接">​</a></h2>
<ul>
<li>视频的封装格式是 TS</li>
<li>视频编码格式为 H264，音频编码格式为 MP3、AAC 或者 AC-3</li>
<li>除了 TS 视频文件本身，还定义了用来控制播放的 m3u8 文件</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_GyWS" id="参考资料">参考资料<a href="#参考资料" class="hash-link" aria-label="参考资料的直接链接" title="参考资料的直接链接">​</a></h2>
<p>B 站直播中 HLS 和去中心化 P2P 的实际应用</p></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><a href="https://github.com/blog/HLS 流媒体传输协议/index.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_OZlc" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_je3X"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="博文分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/显卡"><div class="pagination-nav__sublabel">较新一篇</div><div class="pagination-nav__label">视频</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/硬件"><div class="pagination-nav__sublabel">较旧一篇</div><div class="pagination-nav__label">硬件</div></a></nav></main><div class="col col--2"><div class="tableOfContents_fCFd thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#实现原理" class="table-of-contents__link toc-highlight">实现原理</a></li><li><a href="#技术架构" class="table-of-contents__link toc-highlight">技术架构</a><ul><li><a href="#server" class="table-of-contents__link toc-highlight">Server</a></li><li><a href="#视频封装格式mpeg-ts" class="table-of-contents__link toc-highlight">视频封装格式：MPEG-TS。</a></li><li><a href="#distribution" class="table-of-contents__link toc-highlight">Distribution</a></li><li><a href="#client" class="table-of-contents__link toc-highlight">Client</a></li></ul></li><li><a href="#hls-协议规定" class="table-of-contents__link toc-highlight">HLS 协议规定：</a></li><li><a href="#参考资料" class="table-of-contents__link toc-highlight">参考资料</a></li></ul></div></div></div></div></div></div>
</body>
</html>