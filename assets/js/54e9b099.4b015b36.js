"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3022],{30837:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>c,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"\u524d\u7aef/JavaScript/\u5b9e\u73b0/\u73a9\u5177/\u6a21\u62df\u65b9\u6cd5\u4ee3\u7801\u5b9e\u73b0/\u5b9e\u73b0\u4e00\u4e2aPromise\uff1f","title":"\u5b9e\u73b0\u4e00\u4e2aPromise\uff1f","description":"\u53ef\u4ee5\u901a\u8fc7\u624b\u52a8\u5b9e\u73b0 Promise \u7684\u57fa\u672c\u529f\u80fd\uff0c\u6765\u4e86\u89e3 Promise \u7684\u5de5\u4f5c\u539f\u7406\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u4e0d\u4f7f\u7528\u7b2c\u4e09\u65b9\u5e93\u7684 Promise \u5b9e\u73b0\u793a\u4f8b\uff1a","source":"@site/docs/\u524d\u7aef/JavaScript/\u5b9e\u73b0/\u73a9\u5177/\u6a21\u62df\u65b9\u6cd5\u4ee3\u7801\u5b9e\u73b0/\u5b9e\u73b0\u4e00\u4e2aPromise\uff1f.mdx","sourceDirName":"\u524d\u7aef/JavaScript/\u5b9e\u73b0/\u73a9\u5177/\u6a21\u62df\u65b9\u6cd5\u4ee3\u7801\u5b9e\u73b0","slug":"/\u524d\u7aef/JavaScript/\u5b9e\u73b0/\u73a9\u5177/\u6a21\u62df\u65b9\u6cd5\u4ee3\u7801\u5b9e\u73b0/\u5b9e\u73b0\u4e00\u4e2aPromise\uff1f","permalink":"/docs/\u524d\u7aef/JavaScript/\u5b9e\u73b0/\u73a9\u5177/\u6a21\u62df\u65b9\u6cd5\u4ee3\u7801\u5b9e\u73b0/\u5b9e\u73b0\u4e00\u4e2aPromise\uff1f","draft":false,"unlisted":false,"editUrl":"https://github.com/docs/\u524d\u7aef/JavaScript/\u5b9e\u73b0/\u73a9\u5177/\u6a21\u62df\u65b9\u6cd5\u4ee3\u7801\u5b9e\u73b0/\u5b9e\u73b0\u4e00\u4e2aPromise\uff1f.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"\u524d\u7aef","previous":{"title":"\u68c0\u6d4b\u6d4f\u89c8\u5668\u7248\u672c","permalink":"/docs/\u524d\u7aef/JavaScript/\u5b9e\u73b0/\u73a9\u5177/\u68c0\u6d4b\u6d4f\u89c8\u5668\u7248\u672c"},"next":{"title":"\u5b9e\u73b0\u4e00\u4e2abind\uff1f","permalink":"/docs/\u524d\u7aef/JavaScript/\u5b9e\u73b0/\u73a9\u5177/\u6a21\u62df\u65b9\u6cd5\u4ee3\u7801\u5b9e\u73b0/\u5b9e\u73b0\u4e00\u4e2abind\uff1f"}}');var s=t(25105),o=t(93881);const c={},i=void 0,l={},a=[];function u(e){const n={code:"code",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"\u53ef\u4ee5\u901a\u8fc7\u624b\u52a8\u5b9e\u73b0 Promise \u7684\u57fa\u672c\u529f\u80fd\uff0c\u6765\u4e86\u89e3 Promise \u7684\u5de5\u4f5c\u539f\u7406\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u4e0d\u4f7f\u7528\u7b2c\u4e09\u65b9\u5e93\u7684 Promise \u5b9e\u73b0\u793a\u4f8b\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'function CustomPromise(executor) {\n  // \u521d\u59cb\u5316 Promise \u7684\u72b6\u6001\u4e3a pending\n  this.status = "pending";\n  // \u521d\u59cb\u5316 Promise \u7684\u503c\n  this.value = undefined;\n  // \u521d\u59cb\u5316 Promise \u7684\u56de\u8c03\u51fd\u6570\u961f\u5217\n  this.callbacks = [];\n\n  // \u5b9a\u4e49 resolve \u51fd\u6570\uff0c\u7528\u4e8e\u5c06 Promise \u7684\u72b6\u6001\u4ece pending \u53d8\u4e3a fulfilled\uff0c\u5e76\u6267\u884c\u540e\u7eed\u7684\u64cd\u4f5c\n  const resolve = (value) => {\n    if (this.status === "pending") {\n      this.status = "fulfilled";\n      this.value = value;\n      this.callbacks.forEach((callback) => callback.onFulfilled(value));\n    }\n  };\n\n  // \u5b9a\u4e49 reject \u51fd\u6570\uff0c\u7528\u4e8e\u5c06 Promise \u7684\u72b6\u6001\u4ece pending \u53d8\u4e3a rejected\uff0c\u5e76\u6267\u884c\u540e\u7eed\u7684\u64cd\u4f5c\n  const reject = (reason) => {\n    if (this.status === "pending") {\n      this.status = "rejected";\n      this.value = reason;\n      this.callbacks.forEach((callback) => callback.onRejected(reason));\n    }\n  };\n\n  // \u6267\u884c executor \u51fd\u6570\uff0c\u5e76\u4f20\u5165 resolve \u548c reject \u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\n  try {\n    executor(resolve, reject);\n  } catch (error) {\n    reject(error);\n  }\n}\n\n// \u5b9a\u4e49 then \u65b9\u6cd5\uff0c\u7528\u4e8e\u6ce8\u518c Promise \u7684\u56de\u8c03\u51fd\u6570\nCustomPromise.prototype.then = function (onFulfilled, onRejected) {\n  // \u521b\u5efa\u4e00\u4e2a\u65b0\u7684 Promise \u5b9e\u4f8b\n  return new CustomPromise((resolve, reject) => {\n    // \u5c06\u56de\u8c03\u51fd\u6570\u5305\u88c5\u6210\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4ee5\u4fbf\u540e\u7eed\u5904\u7406\n    const callback = {\n      onFulfilled: (value) => {\n        try {\n          if (typeof onFulfilled === "function") {\n            const result = onFulfilled(value);\n            if (result instanceof CustomPromise) {\n              result.then(resolve, reject);\n            } else {\n              resolve(result);\n            }\n          } else {\n            resolve(value);\n          }\n        } catch (error) {\n          reject(error);\n        }\n      },\n      onRejected: (reason) => {\n        try {\n          if (typeof onRejected === "function") {\n            const result = onRejected(reason);\n            if (result instanceof CustomPromise) {\n              result.then(resolve, reject);\n            } else {\n              reject(result);\n            }\n          } else {\n            reject(reason);\n          }\n        } catch (error) {\n          reject(error);\n        }\n      },\n    };\n\n    // \u6839\u636e Promise \u7684\u72b6\u6001\uff0c\u6267\u884c\u56de\u8c03\u51fd\u6570\u6216\u8005\u5c06\u56de\u8c03\u51fd\u6570\u52a0\u5165\u961f\u5217\n    if (this.status === "fulfilled") {\n      setTimeout(() => {\n        callback.onFulfilled(this.value);\n      });\n    } else if (this.status === "rejected") {\n      setTimeout(() => {\n        callback.onRejected(this.value);\n      });\n    } else {\n      this.callbacks.push(callback);\n    }\n  });\n};\n\n// \u5b9a\u4e49 catch \u65b9\u6cd5\uff0c\u7528\u4e8e\u6355\u83b7 Promise \u7684\u9519\u8bef\nCustomPromise.prototype.catch = function (onRejected) {\n  return this.then(null, onRejected);\n};\n\n// \u6d4b\u8bd5 Promise\nconst promise = new CustomPromise((resolve, reject) => {\n  setTimeout(() => {\n    resolve("Success");\n    // reject(\'Error\');\n  }, 1000);\n});\n\npromise\n  .then(\n    (value) => {\n      console.log("Resolved:", value);\n      return "New Value";\n    },\n    (reason) => {\n      console.log("Rejected:", reason);\n      throw new Error("New Error");\n    }\n  )\n  .then(\n    (value) => {\n      console.log("Resolved:", value);\n    },\n    (reason) => {\n      console.log("Rejected:", reason);\n    }\n  )\n  .catch((error) => {\n    console.log("Caught:", error);\n  });\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u8fd9\u4e2a\u7b80\u5355\u7684\u5b9e\u73b0\u6f14\u793a\u4e86 Promise \u7684\u57fa\u672c\u529f\u80fd\uff0c\u5305\u62ec\u521b\u5efa Promise \u5b9e\u4f8b\u3001\u6ce8\u518c\u56de\u8c03\u51fd\u6570\u3001\u5904\u7406\u5f02\u6b65\u64cd\u4f5c\u3001\u94fe\u5f0f\u8c03\u7528\u7b49\u3002\u867d\u7136\u8fd9\u53ea\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\uff0c\u4f46\u5b83\u53ef\u4ee5\u5e2e\u52a9\u7406\u89e3 Promise \u7684\u5de5\u4f5c\u539f\u7406\u4ee5\u53ca\u5982\u4f55\u624b\u52a8\u5b9e\u73b0\u4e00\u4e2a\u57fa\u672c\u7684 Promise\u3002"})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},93881:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>i});var r=t(58101);const s={},o=r.createContext(s);function c(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);