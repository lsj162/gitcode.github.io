"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["2783"],{14631:function(e,n,r){r.r(n),r.d(n,{frontMatter:()=>l,default:()=>d,contentTitle:()=>i,assets:()=>c,toc:()=>a,metadata:()=>t});var t=JSON.parse('{"id":"\u524D\u7AEF/JavaScript/\u5B9E\u73B0/\u73A9\u5177/\u6A21\u62DF\u65B9\u6CD5\u4EE3\u7801\u5B9E\u73B0/\u5B9E\u73B0\u4E00\u4E2APromise\uFF1F","title":"\u5B9E\u73B0\u4E00\u4E2APromise\uFF1F","description":"\u53EF\u4EE5\u901A\u8FC7\u624B\u52A8\u5B9E\u73B0 Promise \u7684\u57FA\u672C\u529F\u80FD\uFF0C\u6765\u4E86\u89E3 Promise \u7684\u5DE5\u4F5C\u539F\u7406\u3002\u4EE5\u4E0B\u662F\u4E00\u4E2A\u7B80\u5355\u7684\u4E0D\u4F7F\u7528\u7B2C\u4E09\u65B9\u5E93\u7684 Promise \u5B9E\u73B0\u793A\u4F8B\uFF1A","source":"@site/docs/\u524D\u7AEF/JavaScript/\u5B9E\u73B0/\u73A9\u5177/\u6A21\u62DF\u65B9\u6CD5\u4EE3\u7801\u5B9E\u73B0/\u5B9E\u73B0\u4E00\u4E2APromise\uFF1F.mdx","sourceDirName":"\u524D\u7AEF/JavaScript/\u5B9E\u73B0/\u73A9\u5177/\u6A21\u62DF\u65B9\u6CD5\u4EE3\u7801\u5B9E\u73B0","slug":"/\u524D\u7AEF/JavaScript/\u5B9E\u73B0/\u73A9\u5177/\u6A21\u62DF\u65B9\u6CD5\u4EE3\u7801\u5B9E\u73B0/\u5B9E\u73B0\u4E00\u4E2APromise\uFF1F","permalink":"/docs/\u524D\u7AEF/JavaScript/\u5B9E\u73B0/\u73A9\u5177/\u6A21\u62DF\u65B9\u6CD5\u4EE3\u7801\u5B9E\u73B0/\u5B9E\u73B0\u4E00\u4E2APromise\uFF1F","draft":false,"unlisted":false,"editUrl":"https://github.com/docs/\u524D\u7AEF/JavaScript/\u5B9E\u73B0/\u73A9\u5177/\u6A21\u62DF\u65B9\u6CD5\u4EE3\u7801\u5B9E\u73B0/\u5B9E\u73B0\u4E00\u4E2APromise\uFF1F.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"\u524D\u7AEF","previous":{"title":"\u68C0\u6D4B\u6D4F\u89C8\u5668\u7248\u672C","permalink":"/docs/\u524D\u7AEF/JavaScript/\u5B9E\u73B0/\u73A9\u5177/\u68C0\u6D4B\u6D4F\u89C8\u5668\u7248\u672C"},"next":{"title":"\u5B9E\u73B0\u4E00\u4E2Abind\uFF1F","permalink":"/docs/\u524D\u7AEF/JavaScript/\u5B9E\u73B0/\u73A9\u5177/\u6A21\u62DF\u65B9\u6CD5\u4EE3\u7801\u5B9E\u73B0/\u5B9E\u73B0\u4E00\u4E2Abind\uFF1F"}}'),s=r(96773),o=r(16070);let l={},i=void 0,c={},a=[];function u(e){let n={code:"code",p:"p",pre:"pre",...(0,o.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"\u53EF\u4EE5\u901A\u8FC7\u624B\u52A8\u5B9E\u73B0 Promise \u7684\u57FA\u672C\u529F\u80FD\uFF0C\u6765\u4E86\u89E3 Promise \u7684\u5DE5\u4F5C\u539F\u7406\u3002\u4EE5\u4E0B\u662F\u4E00\u4E2A\u7B80\u5355\u7684\u4E0D\u4F7F\u7528\u7B2C\u4E09\u65B9\u5E93\u7684 Promise \u5B9E\u73B0\u793A\u4F8B\uFF1A"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'function CustomPromise(executor) {\n  // \u521D\u59CB\u5316 Promise \u7684\u72B6\u6001\u4E3A pending\n  this.status = "pending";\n  // \u521D\u59CB\u5316 Promise \u7684\u503C\n  this.value = undefined;\n  // \u521D\u59CB\u5316 Promise \u7684\u56DE\u8C03\u51FD\u6570\u961F\u5217\n  this.callbacks = [];\n\n  // \u5B9A\u4E49 resolve \u51FD\u6570\uFF0C\u7528\u4E8E\u5C06 Promise \u7684\u72B6\u6001\u4ECE pending \u53D8\u4E3A fulfilled\uFF0C\u5E76\u6267\u884C\u540E\u7EED\u7684\u64CD\u4F5C\n  const resolve = (value) => {\n    if (this.status === "pending") {\n      this.status = "fulfilled";\n      this.value = value;\n      this.callbacks.forEach((callback) => callback.onFulfilled(value));\n    }\n  };\n\n  // \u5B9A\u4E49 reject \u51FD\u6570\uFF0C\u7528\u4E8E\u5C06 Promise \u7684\u72B6\u6001\u4ECE pending \u53D8\u4E3A rejected\uFF0C\u5E76\u6267\u884C\u540E\u7EED\u7684\u64CD\u4F5C\n  const reject = (reason) => {\n    if (this.status === "pending") {\n      this.status = "rejected";\n      this.value = reason;\n      this.callbacks.forEach((callback) => callback.onRejected(reason));\n    }\n  };\n\n  // \u6267\u884C executor \u51FD\u6570\uFF0C\u5E76\u4F20\u5165 resolve \u548C reject \u51FD\u6570\u4F5C\u4E3A\u53C2\u6570\n  try {\n    executor(resolve, reject);\n  } catch (error) {\n    reject(error);\n  }\n}\n\n// \u5B9A\u4E49 then \u65B9\u6CD5\uFF0C\u7528\u4E8E\u6CE8\u518C Promise \u7684\u56DE\u8C03\u51FD\u6570\nCustomPromise.prototype.then = function (onFulfilled, onRejected) {\n  // \u521B\u5EFA\u4E00\u4E2A\u65B0\u7684 Promise \u5B9E\u4F8B\n  return new CustomPromise((resolve, reject) => {\n    // \u5C06\u56DE\u8C03\u51FD\u6570\u5305\u88C5\u6210\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u4EE5\u4FBF\u540E\u7EED\u5904\u7406\n    const callback = {\n      onFulfilled: (value) => {\n        try {\n          if (typeof onFulfilled === "function") {\n            const result = onFulfilled(value);\n            if (result instanceof CustomPromise) {\n              result.then(resolve, reject);\n            } else {\n              resolve(result);\n            }\n          } else {\n            resolve(value);\n          }\n        } catch (error) {\n          reject(error);\n        }\n      },\n      onRejected: (reason) => {\n        try {\n          if (typeof onRejected === "function") {\n            const result = onRejected(reason);\n            if (result instanceof CustomPromise) {\n              result.then(resolve, reject);\n            } else {\n              reject(result);\n            }\n          } else {\n            reject(reason);\n          }\n        } catch (error) {\n          reject(error);\n        }\n      },\n    };\n\n    // \u6839\u636E Promise \u7684\u72B6\u6001\uFF0C\u6267\u884C\u56DE\u8C03\u51FD\u6570\u6216\u8005\u5C06\u56DE\u8C03\u51FD\u6570\u52A0\u5165\u961F\u5217\n    if (this.status === "fulfilled") {\n      setTimeout(() => {\n        callback.onFulfilled(this.value);\n      });\n    } else if (this.status === "rejected") {\n      setTimeout(() => {\n        callback.onRejected(this.value);\n      });\n    } else {\n      this.callbacks.push(callback);\n    }\n  });\n};\n\n// \u5B9A\u4E49 catch \u65B9\u6CD5\uFF0C\u7528\u4E8E\u6355\u83B7 Promise \u7684\u9519\u8BEF\nCustomPromise.prototype.catch = function (onRejected) {\n  return this.then(null, onRejected);\n};\n\n// \u6D4B\u8BD5 Promise\nconst promise = new CustomPromise((resolve, reject) => {\n  setTimeout(() => {\n    resolve("Success");\n    // reject(\'Error\');\n  }, 1000);\n});\n\npromise\n  .then(\n    (value) => {\n      console.log("Resolved:", value);\n      return "New Value";\n    },\n    (reason) => {\n      console.log("Rejected:", reason);\n      throw new Error("New Error");\n    }\n  )\n  .then(\n    (value) => {\n      console.log("Resolved:", value);\n    },\n    (reason) => {\n      console.log("Rejected:", reason);\n    }\n  )\n  .catch((error) => {\n    console.log("Caught:", error);\n  });\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u8FD9\u4E2A\u7B80\u5355\u7684\u5B9E\u73B0\u6F14\u793A\u4E86 Promise \u7684\u57FA\u672C\u529F\u80FD\uFF0C\u5305\u62EC\u521B\u5EFA Promise \u5B9E\u4F8B\u3001\u6CE8\u518C\u56DE\u8C03\u51FD\u6570\u3001\u5904\u7406\u5F02\u6B65\u64CD\u4F5C\u3001\u94FE\u5F0F\u8C03\u7528\u7B49\u3002\u867D\u7136\u8FD9\u53EA\u662F\u4E00\u4E2A\u7B80\u5355\u7684\u793A\u4F8B\uFF0C\u4F46\u5B83\u53EF\u4EE5\u5E2E\u52A9\u7406\u89E3 Promise \u7684\u5DE5\u4F5C\u539F\u7406\u4EE5\u53CA\u5982\u4F55\u624B\u52A8\u5B9E\u73B0\u4E00\u4E2A\u57FA\u672C\u7684 Promise\u3002"})]})}function d(e={}){let{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}}}]);