"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["8920"],{53482:function(e,l,s){s.r(l),s.d(l,{frontMatter:()=>t,default:()=>b,contentTitle:()=>d,assets:()=>p,toc:()=>c,metadata:()=>i});var i=JSON.parse('{"id":"\u64CD\u4F5C\u7CFB\u7EDF/Linux/Debian/iptables\u9632\u706B\u5899/index","title":"iptables \u7BA1\u7406\u9632\u706B\u5899","description":"\u5728 Debian \u53D1\u884C\u7248\u4E0A\uFF0C\u9ED8\u8BA4\u53EF\u80FD\u6CA1\u6709\u5B89\u88C5 iptables\uFF0C\u4F60\u53EF\u4EE5\u624B\u52A8\u5B89\u88C5\uFF1A","source":"@site/docs/\u64CD\u4F5C\u7CFB\u7EDF/Linux/Debian/iptables\u9632\u706B\u5899/index.mdx","sourceDirName":"\u64CD\u4F5C\u7CFB\u7EDF/Linux/Debian/iptables\u9632\u706B\u5899","slug":"/\u64CD\u4F5C\u7CFB\u7EDF/Linux/Debian/iptables\u9632\u706B\u5899/","permalink":"/docs/\u64CD\u4F5C\u7CFB\u7EDF/Linux/Debian/iptables\u9632\u706B\u5899/","draft":false,"unlisted":false,"editUrl":"https://github.com/docs/\u64CD\u4F5C\u7CFB\u7EDF/Linux/Debian/iptables\u9632\u706B\u5899/index.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"\u64CD\u4F5C\u7CFB\u7EDF","previous":{"title":"Debian","permalink":"/docs/\u64CD\u4F5C\u7CFB\u7EDF/Linux/Debian/"},"next":{"title":"ufw \u9632\u706B\u5899","permalink":"/docs/\u64CD\u4F5C\u7CFB\u7EDF/Linux/Debian/ufw\u9632\u706B\u5899/"}}'),n=s(96773),a=s(16070);let t={},d="iptables \u7BA1\u7406\u9632\u706B\u5899",p={},c=[{value:"\u5728 Debian \u53D1\u884C\u7248\u4E0A\uFF0C\u9ED8\u8BA4\u53EF\u80FD\u6CA1\u6709\u5B89\u88C5 iptables\uFF0C\u4F60\u53EF\u4EE5\u624B\u52A8\u5B89\u88C5\uFF1A",id:"\u5728-debian-\u53D1\u884C\u7248\u4E0A\u9ED8\u8BA4\u53EF\u80FD\u6CA1\u6709\u5B89\u88C5-iptables\u4F60\u53EF\u4EE5\u624B\u52A8\u5B89\u88C5",level:2},{value:"\u5378\u8F7D",id:"\u5378\u8F7D",level:2},{value:"\u67E5\u770B\u7248\u672C",id:"\u67E5\u770B\u7248\u672C",level:2},{value:"\u542F\u7528 iptables",id:"\u542F\u7528-iptables",level:2},{value:"\u53EF\u901A\u8FC7\u67E5\u770B\u5F53\u524D iptables \u8BBE\u7F6E\u89C4\u5219\uFF08\u5982\u7528 ufw \u5E95\u5C42\u662F iptables \u4F1A\u5F71\u54CD\u5230\uFF09",id:"\u53EF\u901A\u8FC7\u67E5\u770B\u5F53\u524D-iptables-\u8BBE\u7F6E\u89C4\u5219\u5982\u7528-ufw-\u5E95\u5C42\u662F-iptables-\u4F1A\u5F71\u54CD\u5230",level:3},{value:"\u6682\u505C iptables",id:"\u6682\u505C-iptables",level:2},{value:"\u68C0\u67E5 iptables \u72B6\u6001",id:"\u68C0\u67E5-iptables-\u72B6\u6001",level:2},{value:"\u8BBE\u7F6E\u9ED8\u8BA4\u7B56\u7565",id:"\u8BBE\u7F6E\u9ED8\u8BA4\u7B56\u7565",level:2},{value:"\u5F00\u653E\u4EE5\u4E0B\u7AEF\u53E3\uFF1A",id:"\u5F00\u653E\u4EE5\u4E0B\u7AEF\u53E3",level:2},{value:"\u5220\u9664\u89C4\u5219",id:"\u5220\u9664\u89C4\u5219",level:2},{value:"\u6062\u590D\u9ED8\u8BA4\u7B56\u7565",id:"\u6062\u590D\u9ED8\u8BA4\u7B56\u7565",level:2},{value:"\u8BBE\u7F6E iptables \u5F00\u673A\u81EA\u542F",id:"\u8BBE\u7F6E-iptables-\u5F00\u673A\u81EA\u542F",level:2},{value:"\u4FDD\u5B58\u548C\u6062\u590D iptables \u89C4\u5219",id:"\u4FDD\u5B58\u548C\u6062\u590D-iptables-\u89C4\u5219",level:3}];function r(e){let l={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.header,{children:(0,n.jsx)(l.h1,{id:"iptables-\u7BA1\u7406\u9632\u706B\u5899",children:"iptables \u7BA1\u7406\u9632\u706B\u5899"})}),"\n",(0,n.jsx)(l.h2,{id:"\u5728-debian-\u53D1\u884C\u7248\u4E0A\u9ED8\u8BA4\u53EF\u80FD\u6CA1\u6709\u5B89\u88C5-iptables\u4F60\u53EF\u4EE5\u624B\u52A8\u5B89\u88C5",children:"\u5728 Debian \u53D1\u884C\u7248\u4E0A\uFF0C\u9ED8\u8BA4\u53EF\u80FD\u6CA1\u6709\u5B89\u88C5 iptables\uFF0C\u4F60\u53EF\u4EE5\u624B\u52A8\u5B89\u88C5\uFF1A"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-shell",children:"sudo apt update\nsudo apt install iptables -y\n"})}),"\n",(0,n.jsx)(l.h2,{id:"\u5378\u8F7D",children:"\u5378\u8F7D"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-shell",children:"apt remove iptables\n"})}),"\n",(0,n.jsx)(l.h2,{id:"\u67E5\u770B\u7248\u672C",children:"\u67E5\u770B\u7248\u672C"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-shell",children:"iptables -V\n"})}),"\n",(0,n.jsx)(l.h2,{id:"\u542F\u7528-iptables",children:"\u542F\u7528 iptables"}),"\n",(0,n.jsxs)(l.blockquote,{children:["\n",(0,n.jsx)(l.p,{children:"iptables \u672C\u8EAB\u4E0D\u662F\u4E00\u4E2A\u5B88\u62A4\u8FDB\u7A0B\uFF0C\u5B83\u662F Linux \u5185\u6838\u7684\u9632\u706B\u5899\u6A21\u5757\uFF0C\u56E0\u6B64\u6CA1\u6709 systemctl start iptables \u8FD9\u6837\u7684\u547D\u4EE4\u3002"}),"\n"]}),"\n",(0,n.jsx)(l.h3,{id:"\u53EF\u901A\u8FC7\u67E5\u770B\u5F53\u524D-iptables-\u8BBE\u7F6E\u89C4\u5219\u5982\u7528-ufw-\u5E95\u5C42\u662F-iptables-\u4F1A\u5F71\u54CD\u5230",children:"\u53EF\u901A\u8FC7\u67E5\u770B\u5F53\u524D iptables \u8BBE\u7F6E\u89C4\u5219\uFF08\u5982\u7528 ufw \u5E95\u5C42\u662F iptables \u4F1A\u5F71\u54CD\u5230\uFF09"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-shell",children:"sudo iptables -L -n -v\n"})}),"\n",(0,n.jsxs)(l.ul,{children:["\n",(0,n.jsx)(l.li,{children:"-L\uFF1A\u5217\u51FA\u6240\u6709\u89C4\u5219"}),"\n",(0,n.jsx)(l.li,{children:"-n\uFF1A\u4E0D\u89E3\u6790 IP\uFF08\u52A0\u5FEB\u663E\u793A\u901F\u5EA6\uFF09"}),"\n",(0,n.jsx)(l.li,{children:"-v\uFF1A\u663E\u793A\u8BE6\u7EC6\u4FE1\u606F"}),"\n"]}),"\n",(0,n.jsx)(l.h2,{id:"\u6682\u505C-iptables",children:"\u6682\u505C iptables"}),"\n",(0,n.jsxs)(l.blockquote,{children:["\n",(0,n.jsx)(l.p,{children:"\u4E34\u65F6\u6E05\u7A7A\u6240\u6709 iptables \u89C4\u5219"}),"\n"]}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-shell",children:"sudo iptables -F\n"})}),"\n",(0,n.jsx)(l.h2,{id:"\u68C0\u67E5-iptables-\u72B6\u6001",children:"\u68C0\u67E5 iptables \u72B6\u6001"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-shell",children:"sudo systemctl status nftables\n"})}),"\n",(0,n.jsx)(l.h2,{id:"\u8BBE\u7F6E\u9ED8\u8BA4\u7B56\u7565",children:"\u8BBE\u7F6E\u9ED8\u8BA4\u7B56\u7565"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-shell",children:"sudo iptables -P INPUT DROP    # \u9ED8\u8BA4\u62D2\u7EDD\u6240\u6709\u4F20\u5165\u8FDE\u63A5\nsudo iptables -P FORWARD DROP  # \u7981\u6B62\u6D41\u91CF\u8F6C\u53D1\nsudo iptables -P OUTPUT ACCEPT # \u5141\u8BB8\u670D\u52A1\u5668\u8BBF\u95EE\u5916\u90E8\u7F51\u7EDC\n"})}),"\n",(0,n.jsx)(l.h2,{id:"\u5F00\u653E\u4EE5\u4E0B\u7AEF\u53E3",children:"\u5F00\u653E\u4EE5\u4E0B\u7AEF\u53E3\uFF1A"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-shell",children:"sudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT   # HTTP\nsudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT  # HTTPS\nsudo iptables -A INPUT -p tcp --dport 25 -j ACCEPT   # SMTP\nsudo iptables -A INPUT -p tcp --dport 587 -j ACCEPT  # SMTP Submission\nsudo iptables -A INPUT -p tcp --dport 465 -j ACCEPT  # SMTPS\nsudo iptables -A INPUT -p tcp --dport 22 -j ACCEPT   # \u5141\u8BB8 SSH \u8FDE\u63A5\n"})}),"\n",(0,n.jsx)(l.p,{children:"\u963B\u6B62 IP \u5730\u5740"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-shell",children:"sudo iptables -A INPUT -s 192.168.1.100 -j DROP # \u7981\u6B62\u5355\u4E2A IP\nsudo iptables -A INPUT -s 192.168.1.0/24 -j DROP # \u7981\u6B62\u6574\u4E2A IP \u6BB5\n"})}),"\n",(0,n.jsx)(l.h2,{id:"\u5220\u9664\u89C4\u5219",children:"\u5220\u9664\u89C4\u5219"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-shell",children:"sudo iptables -D INPUT -p tcp --dport 22 -j ACCEPT\n"})}),"\n",(0,n.jsx)(l.h2,{id:"\u6062\u590D\u9ED8\u8BA4\u7B56\u7565",children:"\u6062\u590D\u9ED8\u8BA4\u7B56\u7565"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-shell",children:"sudo iptables -P INPUT ACCEPT\nsudo iptables -P FORWARD ACCEPT\nsudo iptables -P OUTPUT ACCEPT\n"})}),"\n",(0,n.jsx)(l.h2,{id:"\u8BBE\u7F6E-iptables-\u5F00\u673A\u81EA\u542F",children:"\u8BBE\u7F6E iptables \u5F00\u673A\u81EA\u542F"}),"\n",(0,n.jsx)(l.p,{children:"Debian \u9ED8\u8BA4\u4E0D\u4F1A\u81EA\u52A8\u6062\u590D iptables \u89C4\u5219\uFF0C\u56E0\u6B64\u9700\u8981\u624B\u52A8\u4FDD\u5B58\u548C\u6062\u590D\u89C4\u5219\u3002Debian \u5173\u95ED iptables \u540E\uFF0C\u89C4\u5219\u4E0D\u4F1A\u81EA\u52A8\u4FDD\u5B58\uFF0C\u91CD\u542F\u540E\u4F1A\u4E22\u5931\u3002"}),"\n",(0,n.jsx)(l.h3,{id:"\u4FDD\u5B58\u548C\u6062\u590D-iptables-\u89C4\u5219",children:"\u4FDD\u5B58\u548C\u6062\u590D iptables \u89C4\u5219"}),"\n",(0,n.jsx)(l.p,{children:"\u4FDD\u5B58\u89C4\u5219"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-shell",children:"sudo iptables-save > /etc/iptables.rules\n"})}),"\n",(0,n.jsx)(l.p,{children:"\u6062\u590D\u89C4\u5219"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-shell",children:"sudo iptables-restore < /etc/iptables.rules\n"})}),"\n",(0,n.jsx)(l.p,{children:"\u81EA\u52A8\u52A0\u8F7D\u89C4\u5219"}),"\n",(0,n.jsxs)(l.blockquote,{children:["\n",(0,n.jsx)(l.p,{children:"\u7F16\u8F91 /etc/network/interfaces\uFF0C\u5728 iface lo inet loopback \u4E0B\u6DFB\u52A0\uFF1A"}),"\n"]}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-shell",children:"pre-up iptables-restore < /etc/iptables.rules\n"})}),"\n",(0,n.jsx)(l.p,{children:"\u6216\u8005\u67E5\u770B\u89C4\u5219\u7F16\u53F7\u5E76\u5220\u9664\uFF1A"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-shell",children:"sudo iptables -L --line-numbers\nsudo iptables -D INPUT 3  # \u5220\u9664\u7B2C 3 \u6761\u89C4\u5219\n"})})]})}function b(e={}){let{wrapper:l}={...(0,a.a)(),...e.components};return l?(0,n.jsx)(l,{...e,children:(0,n.jsx)(r,{...e})}):r(e)}}}]);